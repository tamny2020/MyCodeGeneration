[
  {
    "Id": "602665",
    "ThreadId": "255238",
    "Html": "\r\n<p>I am glad I stumbled upon this code, although my needs are rather simple this code has at least saved me several hours of work, I big thank you goes out to the developers.</p>\r\n<p>I have portions of html page content saved in a database table, I would like to access my model from within this static content. RazorEngine is the perfect solution. Using FCKEditor I input some formatted HTML content and it gets saved into the table. Within\r\n this content I would like to have @Model.SomeData which references some properties of my model for that view.</p>\r\n<p>I am struggling a bit with implementing this into an existing solution. I got RazorEngine up and running but not sure how to use it in my view.cshtml.</p>\r\n<p>Here is my view before the RazorEngine implementation...</p>\r\n<p>&nbsp;</p>\r\n<pre>@model DiversionPrograms.Web.ViewModels.ContentSectionViewModel\r\n@{\r\n   \r\n    Layout = null;\r\n}\r\n<div id=\"x_@Model.SectionAlias\">\r\n    @foreach (var item in Model.GetSectionContent())\r\n           {\r\n               \r\n              if (!string.IsNullOrEmpty(item.Contents) &amp;&amp; !string.IsNullOrWhiteSpace(item.Contents))\r\n               {\r\n                Html.Raw(item.Contents);\r\n\r\n               }\r\n            \r\n           }\r\n</div></pre>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>What I would like to do is take the output from the Html.Raw(item.Contents) statement and pass it into the RazorEngine as the template parameter. Everything I have tried so far has produced an error.</p>\r\n<p>What would the syntax look like?</p>\r\n<p>Thanks</p>\r\n",
    "PostedDate": "2011-04-25T19:22:56.82-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "602758",
    "ThreadId": "255238",
    "Html": "<p>I would introduce an extension method to the HtmlHelper class, something like:</p>\r\n<p>&nbsp;</p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre><span style=\"color: blue;\">public</span> <span style=\"color: blue;\">static</span> <span style=\"color: blue;\">string</span> RenderTemplate(<span style=\"color: blue;\">this</span> HtmlHelper helper, <span style=\"color: blue;\">string</span> template)\r\n{\r\n  <span style=\"color: blue;\">return</span> helper.Raw(Razor.Parse(template));\r\n}\r\n\r\n<span style=\"color: blue;\">public</span> <span style=\"color: blue;\">static</span> <span style=\"color: blue;\">string</span> RenderTemplate&lt;T&gt;(<span style=\"color: blue;\">this</span> HtmlHelper helper, <span style=\"color: blue;\">string</span> template, T model)\r\n{\r\n  <span style=\"color: blue;\">return</span> helper.Raw(Razor.Parse(template, model));\r\n}\r\n</pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<p>That way, you should be able to call it as either:</p>\r\n<p>&nbsp;</p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre>@Html.RenderTemplate(item.Contents);\r\n</pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<p>Or:</p>\r\n<p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre>@Html.RenderTemplate(item.Contents, <span style=\"color: blue;\">new</span> { Name = <span style=\"color: #a31515;\">\"Matt\"</span> });\r\n</pre>\r\n</div>\r\nThe latter would allow you to pass in a model to be merged with the template.</p>",
    "PostedDate": "2011-04-26T00:56:40.37-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "602972",
    "ThreadId": "255238",
    "Html": "<p>Thanks for the help but there is a problem with writing this as an extension method. Under the this key word I see the error \"Extension method can only be declared in non-generic, non-nested static classes\".</p>",
    "PostedDate": "2011-04-26T07:59:48.047-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "603408",
    "ThreadId": "255238",
    "Html": "<p>Hi,</p>\n<p>You can only add static extension methods to a static class, so something like:</p>\n<p>&nbsp;</p>\n<div style=\"color: black; background-color: white;\">\n<pre><div style=\"color: black; background-color: white;\"><pre><span style=\"color: blue;\">public</span> <span style=\"color: blue;\">static</span> <span style=\"color: blue;\">class</span> HtmlHelperExtensions\n{\n    <span style=\"color: green;\">// Stuff here.</span>\n}\n</pre>\n</div>\n</pre>\n</div>",
    "PostedDate": "2011-04-27T01:28:24.053-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "603663",
    "ThreadId": "255238",
    "Html": "<p>Still no luck with this...</p>\r\n<p>&nbsp;</p>\r\n<p>Here is my helper extension</p>\r\n<p>\r\n<pre><div style=\"color: black; background-color: white;\"><pre><span style=\"color: blue;\">public</span> <span style=\"color: blue;\">static</span> <span style=\"color: blue;\">class</span> SectionContentParseExtensions<br />\t{<br />\t\t<span style=\"color: blue;\">public</span> <span style=\"color: blue;\">static</span> IHtmlString ParseSectionContent&lt;T&gt;(<span style=\"color: blue;\">this</span> HtmlHelper helper, <span style=\"color: blue;\">string</span> template, T model)<br />\t\t{<br />\t\t\t<span style=\"color: blue;\">return</span> helper.Raw(Razor.Parse(template, model));<br />\t\t}<br />\t\t<br />\t}<br /></pre>\r\n</div>\r\n<br />in my view I call it like this<br /></pre>\r\n</p>\r\n<p>Snippet</p>\r\n<pre style=\"font-family: Courier New; font-size: 15px; color: black; background: none repeat scroll 0% 0% white;\"><span style=\"background: none repeat scroll 0% 0% yellow;\">@</span>Html.ParseSectionContent(item.Contents,&nbsp;Model)\r\n<br /><br />and I get the following error.<br /><br /><span>\r\n<h2><em>Unable to compile template. Check the Errors list for details.</em></h2>\r\n</span> <span style=\"font-family: Arial,Helvetica,Geneva,SunSans-Regular,sans-serif;\"> <strong> Description: </strong>An unhandled exception occurred during  the execution of the current web request. Please review the stack trace  for more information about the error and where it originated in the  code.              <br /><br /> <strong> Exception Details: </strong>RazorEngine.Templating.TemplateCompilationException: Unable to compile template. Check the Errors list for details.<br /><br /> <strong>Source Error:</strong> <br /><br /> \r\n<table width=\"100%\" bgcolor=\"#ffffcc\">\r\n<tbody>\r\n<tr>\r\n<td>\r\n<pre>Line 12: \t\tpublic static IHtmlString ParseSectionContent&lt;T&gt;(this HtmlHelper helper, string template, T model)<br />Line 13: \t\t{<br /><span style=\"color: red;\">Line 14: \t\t\treturn helper.Raw(Razor.Parse(template, model));<br /></span>Line 15: \t\t}<br />Line 16: </pre>\r\n</td>\r\n</tr>\r\n</tbody>\r\n</table>\r\n<br /> <strong> Source File: </strong> D:\\Visual Studio 2010\\DiversionProgramsWeb\\source\\DiversionPrograms.Web\\Helpers\\SectionContentParseExtensions.cs<strong> &nbsp;&nbsp; Line: </strong> 14             <br /><br /> <strong>Stack Trace:</strong> <br /><br /> \r\n<table width=\"100%\" bgcolor=\"#ffffcc\">\r\n<tbody>\r\n<tr>\r\n<td>\r\n<pre>[TemplateCompilationException: Unable to compile template. Check the Errors list for details.]<br />   RazorEngine.Compilation.DirectCompilerServiceBase.CompileType(TypeContext context) +119<br />   RazorEngine.Templating.TemplateService.CreateTemplate(String template, Type modelType) +205<br />   RazorEngine.Templating.TemplateService.GetTemplate(String template, Type modelType, String name) +83<br />   RazorEngine.Templating.TemplateService.Parse(String template, T model, String name) +58<br />   RazorEngine.Razor.Parse(String template, T model, String name) +66<br />   DiversionPrograms.Web.Helpers.SectionContentParseExtensions.ParseSectionContent(HtmlHelper helper, String template, T model) in D:\\Visual Studio 2010\\DiversionProgramsWeb\\source\\DiversionPrograms.Web\\Helpers\\SectionContentParseExtensions.cs:14<br />   ASP._Page_Views_Portal_ContentSection_cshtml.Execute() in d:\\Visual Studio 2010\\DiversionProgramsWeb\\source\\DiversionPrograms.Web\\Views\\Portal\\ContentSection.cshtml:23<br />   System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +207<br />   System.Web.Mvc.WebViewPage.ExecutePageHierarchy() +81<br />   System.Web.WebPages.StartPage.RunPage() +19<br />   System.Web.WebPages.StartPage.ExecutePageHierarchy() +65<br />   System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) +76<br />   System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance) +220<br />   System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer) +115<br />   System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) +303<br />   System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult) +13<br />   System.Web.Mvc.&lt;&gt;c__DisplayClass1c.&lt;InvokeActionResultWithFilters&gt;b__19() +23<br />   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +260<br />   System.Web.Mvc.&lt;&gt;c__DisplayClass1e.&lt;InvokeActionResultWithFilters&gt;b__1b() +19<br />   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +260<br />   System.Web.Mvc.&lt;&gt;c__DisplayClass1e.&lt;InvokeActionResultWithFilters&gt;b__1b() +19<br />   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult) +177<br />   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343<br />   System.Web.Mvc.Controller.ExecuteCore() +116<br />   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97<br />   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10<br />   System.Web.Mvc.&lt;&gt;c__DisplayClassb.&lt;BeginProcessRequest&gt;b__5() +37<br />   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass1.&lt;MakeVoidDelegate&gt;b__0() +21<br />   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass8`1.&lt;BeginSynchronous&gt;b__7(IAsyncResult _) +12<br />   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62<br />   System.Web.Mvc.&lt;&gt;c__DisplayClasse.&lt;EndProcessRequest&gt;b__d() +50<br />   System.Web.Mvc.SecurityUtil.&lt;GetCallInAppTrustThunk&gt;b__0(Action f) +7<br />   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22<br />   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60<br />   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9<br />   System.Web.Mvc.&lt;&gt;c__DisplayClassa.&lt;EndProcessRequest&gt;b__9() +23<br />   System.Web.Mvc.&lt;&gt;c__DisplayClass4.&lt;Wrap&gt;b__3() +12<br />   System.Web.Mvc.ServerExecuteHttpHandlerWrapper.Wrap(Func`1 func) +38<br />   System.Web.Mvc.ServerExecuteHttpHandlerWrapper.Wrap(Action action) +65<br />   System.Web.Mvc.ServerExecuteHttpHandlerAsyncWrapper.EndProcessRequest(IAsyncResult result) +71<br />   System.Web.HttpServerUtility.ExecuteInternal(IHttpHandler handler, TextWriter writer, Boolean preserveForm, Boolean setPreviousPage, VirtualPath path, VirtualPath filePath, String physPath, Exception error, String queryStringOverride) +1045<br /><br />[HttpException (0x80004005): Error executing child request for handler 'System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerAsyncWrapper'.]<br />   System.Web.HttpServerUtility.ExecuteInternal(IHttpHandler handler, TextWriter writer, Boolean preserveForm, Boolean setPreviousPage, VirtualPath path, VirtualPath filePath, String physPath, Exception error, String queryStringOverride) +3014151<br />   System.Web.HttpServerUtility.Execute(IHttpHandler handler, TextWriter writer, Boolean preserveForm, Boolean setPreviousPage) +77<br />   System.Web.HttpServerUtility.Execute(IHttpHandler handler, TextWriter writer, Boolean preserveForm) +28<br />   System.Web.HttpServerUtilityWrapper.Execute(IHttpHandler handler, TextWriter writer, Boolean preserveForm) +22<br />   System.Web.Mvc.Html.ChildActionExtensions.ActionHelper(HtmlHelper htmlHelper, String actionName, String controllerName, RouteValueDictionary routeValues, TextWriter textWriter) +481<br />   System.Web.Mvc.Html.ChildActionExtensions.Action(HtmlHelper htmlHelper, String actionName, String controllerName, RouteValueDictionary routeValues) +88<br />   System.Web.Mvc.Html.ChildActionExtensions.Action(HtmlHelper htmlHelper, String actionName, String controllerName, Object routeValues) +46<br />   ASP._Page_Views_Portal_Main_cshtml.Execute() in d:\\Visual Studio 2010\\DiversionProgramsWeb\\source\\DiversionPrograms.Web\\Views\\Portal\\Main.cshtml:31<br />   System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +207<br />   System.Web.Mvc.WebViewPage.ExecutePageHierarchy() +81<br />   System.Web.WebPages.StartPage.RunPage() +19<br />   System.Web.WebPages.StartPage.ExecutePageHierarchy() +65<br />   System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) +76<br />   System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance) +220<br />   System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer) +115<br />   System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) +303<br />   System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult) +13<br />   System.Web.Mvc.&lt;&gt;c__DisplayClass1c.&lt;InvokeActionResultWithFilters&gt;b__19() +23<br />   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +260<br />   System.Web.Mvc.&lt;&gt;c__DisplayClass1e.&lt;InvokeActionResultWithFilters&gt;b__1b() +19<br />   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult) +177<br />   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343<br />   System.Web.Mvc.Controller.ExecuteCore() +116<br />   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97<br />   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10<br />   System.Web.Mvc.&lt;&gt;c__DisplayClassb.&lt;BeginProcessRequest&gt;b__5() +37<br />   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass1.&lt;MakeVoidDelegate&gt;b__0() +21<br />   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass8`1.&lt;BeginSynchronous&gt;b__7(IAsyncResult _) +12<br />   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62<br />   System.Web.Mvc.&lt;&gt;c__DisplayClasse.&lt;EndProcessRequest&gt;b__d() +50<br />   System.Web.Mvc.SecurityUtil.&lt;GetCallInAppTrustThunk&gt;b__0(Action f) +7<br />   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22<br />   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60<br />   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9<br />   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8862381<br />   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +184<br /></pre>\r\n</td>\r\n</tr>\r\n</tbody>\r\n</table>\r\n</span></pre>\r\n<p>\r\n<pre><br /></pre>\r\n</p>",
    "PostedDate": "2011-04-27T09:18:11.013-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "603711",
    "ThreadId": "255238",
    "Html": "<p>Well, that is now a different issue. The issue you are now having is that RazorEngine was unable to compile the template, so you've already got the extension method working. Now you need to figure out why the template can't compile. Put an example template here and also, what Model instance are you passing into the template?<span style=\"white-space: pre;\"> </span></p>",
    "PostedDate": "2011-04-27T10:57:31.693-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "603783",
    "ThreadId": "255238",
    "Html": "<p>Ok I figured it out. I was not referencing my model correctly..</p>\r\n<p>I was using</p>\r\n<pre style=\"font-family: Courier New; font-size: 15px; color: black; background: none repeat scroll 0% 0% white;\"><span style=\"color: green;\">@Model.Case.CaseNo</span>\r\n</pre>\r\n<p>rather than</p>\r\n<pre style=\"font-family: Courier New; font-size: 15px; color: black; background: none repeat scroll 0% 0% white;\"><span style=\"color: green;\">@Model.CurrentUser.Case.CaseNo</span>\r\n<br />I guess it would make more sense if the razorengine would produce an error message that is more intuitive in this case rather than just \"Unable to parse template\".<br />a null reference exception would have saved me a lot of time on this one. <br /><br />Thank you for your help, looks like my implementation was successful!</pre>",
    "PostedDate": "2011-04-27T13:08:38.71-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "604209",
    "ThreadId": "255238",
    "Html": "<p>jbeckton, viewing the list of errors contained in the exception will usually point you to where the error lies</p>",
    "PostedDate": "2011-04-28T08:51:12.13-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]